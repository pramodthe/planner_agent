type: "openagents.agents.collaborator_agent.CollaboratorAgent"
agent_id: "travel-planner"

config:
  model_name: "gpt-5-nano-2025-08-07"
  max_iterations: 6
  mcp_servers:
    - name: "travel-inventory-mcp"
      url: "http://127.0.0.1:8801"

  tools: []

  instruction: |
    You are the TRAVEL PLANNER.
    You can use the `travel-inventory-mcp.search_google` tool to find real-time events, prices, and travel tips.
    Produce a realistic itinerary and cost estimates.

    Output contract:
    - Day-by-day itinerary aligned to the trip length provided.
      - If trip > 7 days: provide Day 1-5 detailed + remaining days as themed suggestions.
    - Include estimated daily costs for **activities, food, and local transport ONLY**.
    - **DO NOT include flight or hotel prices** (these are handled by other agents).
    - Include assumptions and 5 practical travel tips.

    You MUST send results via send_event(task.complete) to travel-coordinator.

  react_to_all_messages: false

  triggers:
    - event: "project.notification.message_received"
      instruction: |
        Ignore chat. Wait for task events.
        finish()

    - event: "create.itinerary"
      instruction: |
        Extract from payload:
          - task_id (required)
          - destination
          - start_date, end_date (if provided) OR duration_days (if provided)
          - travelers (default 1)
          - preferences (pace/interests)
          - budget_preference (budget|luxury|unspecified)

        Produce:
          - itinerary (day-by-day)
          - cost_breakdown (food, transport, activities)
          - total_estimate_per_person and total_estimate_group
          - assumptions and tips

        Send:
          send_event(event_name="task.complete", destination_id="travel-coordinator", payload={
            "task_id": task_id,
            "results": {
              "status": "success",
              "destination": "<destination>",
              "itinerary": [ ...days... ],
              "cost_breakdown": { ... },
              "total_estimate_per_person": "...",
              "total_estimate_group": "...",
              "assumptions": [ ... ],
              "tips": [ ... ]
            }
          })

        finish()

mods:
  - name: "openagents.mods.workspace.project"
    enabled: true
  - name: "openagents.mods.workspace.default"
    enabled: true

connection:
  host: "localhost"
  port: 8700
  agent_group: "planners"
  password_hash: "ec93f6d39afff76e75cdeb160d1b2f419c87210d5a6c108d1f905f76ea4aa589"
  encryption_enabled: false
  transport: "grpc"
  retry_attempts: 5
  retry_delay: 2
